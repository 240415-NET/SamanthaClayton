# Samantha's Project 1 Overview

## Concept
A meal planning application that allows the user to generate a meal plan for 5 days and creates a grocery list based on that meal plan

## Key Functionality
- Displays an autogenerated meal plan to the user (from a list of pre-loaded meals)
- User can modify the meal plan (select different meals)
- User can store the meal plan & come back to it later
- User can view grocery list based off the meal plan


 ## User Stories/Features/To Do Items
 - DONE: As a user, I want to be able to create a profile and log in
    - Main menu that allows a user to choose to create a new profile or log in to an existing one
    - Use their selection to
        - Create a new profile & store it
        - Log in
- DONE: As a user, I want to be able to view the weekly meal plan
    - Create and display a meal plan from a pre-loaded list of meals
- DONE: As a user, I want to be able to save my weekly meal plan & load it later
- DONE: As a user, I want to view my grocery list
    - When a new meal plan is generated
    - Also when I log in later
- DONE: As a user, I want to be able to modify the weekly meal plan
    - Select day to change
    - View all meals -or- randomly generate a new one?

## Project Requirements
### Must-Haves
- DONE: The application should be a C# Console Application

- DONE: The application should build and run

- DONE: The application should interact with users, and provide some console UI
    - Users enter a username when creating a profile or logging in
    - Users are shown various menus and asked to provide a menu selection
        - StartMenu allows a user to create a new profile, log into an existing profile, or exit the application
        - InAppMainMenu allows a user to generate a new meal plan, view a meal plan, edit a meal plan, view the grocery list for a meal plan, or exit the application
        - When generating a meal plan, you can keep generating new meal plans or save the current one.
        - When modifying a meal plan, you select the day/meal you want to replace and then you are shown a list of all available meals and you pick what you'd like to cook instead.
- DONE: The application should allow for multiple users to log in and persist their data
    - Users are stored in a SQL table, so users can create a profile and log in.
    - UserMealPlans are stored in another SQL table, so each user can save their meal plan.
- DONE: The application should demonstrate good input validation
    - Each time we ask a user for some entry (whether it's a username or a menu selection), we validate that entry.
    - Methods of validating user input:
        - Default in a switch statement
        - Try-catch blocks
        - Methods to check if a user exists or if a meal plan exists
        - If-else statements that check if a user's input is empty or null
- DONE: The application should persist data to a SQL Server DB
    - There are multiple SQL tables involved here.
    - The Recipe_Names, Recipe_Ingredients, and Recipe_Steps are pre-loaded.
    - The User table and the UserMealPlans tables store the user's information.
- DONE:  The application should communicate to DB via ADO.NET or Entity Framework Core
    - This uses ADO.NET to store and retrieve data from the SQL tables listed above.


### Nice To Haves
- DONE:  n-tier architecture
    - The application is organized into models (& interfaces), a Presentation Layer, a Logic Layer, and a Data Access Layer.
        - Methods inside of the Presentation Layer can call other Presentation Layer methods or Logic Layer methods rather than calling the Data Access Layer directly.
        - Logic Layer goes through the Data Access Layer in order to retrieve/store data.

- *Not done* - dependency injection
- *Not done* - The application should log errors and system events to a file or a DB table
- *Not done* - Basic user authentication and authorization (admins vs normal users with passwords)
- *Not done* - The application should have unit tests



## Models
- **Users**
    - userId (Guid)
    - userName (string)
- **MealPlan**
    - mealPlanId (Guid)
    - recipeIds (list of Guids)
    - mealNames (list of strings)
- **Recipes**
    - recipeId (Guid)
    - mealName (string)
    - Ingredients (list of GroceryItems)
    - recipeSteps (list of RecipeSteps)
- **GroceryItems**
    - ingredientId (Guid)
    - itemName (string)
    - quantity (double)
    - unitOfMeasure (string)
    - purchased (string)
- **GroceryList**
    - groceryList (List of Grocery Items)
- **RecipeSteps**
    - recipeStepId (Guid)
    - recipeStepSequence (int)
    - recipeStepDescription (string)

## Presentation Layer
### Menus Class
- **StartMenu():**  Gives the user the option to create a new profile, log into an existing profile, or exit the application.
    - Calls these methods
        - UserProfileUI.CreateNewUserPrompts()
        - UserProfileUI.LogInPrompts()
        - InAppMainMenu(userId);
    - Validates user input through
        - Default in the switch (if you select a number other than 1, 2, or 3, it asks you to enter a valid selection)
        - A try-catch (if you enter a string, it asks you to enter a valid selection)
    - "Technologies" used
        - do-while loop
        - try-catch
        - switch statement
- **InAppMainMenu():**  Once a user has created a profile or has logged into an existing profile, they enter this menu.  This allows them to generate a new meal plan, view or edit an existing meal plan, view the grocery list associated iwth a meal plan, or exit the application.
    - Calls these methods
        - MealPlanUI.DisplayNewMealPlan(userId)
        - MealPlansLogic.CheckIfMealPlanExists(userId)
        - MealPlanUI.DisplayExistingMealPlan(userId)
        - MealPlanUI.ModifyExistingMealPlan(userId)
        - GroceryListUI.DisplayGroceryList(userId, userMealPlan)
    - Validates user input through
        - Default in the switch (if you select a number other than 1-5, it asks you to enter a valid selection)
        - A try-catch (if you enter a string, it asks you to enter a valid selection)
        - If-else statements that call the MealPlansLogic.CheckIfMealPlanExists(userId) method (if you try to view or edit a meal plan or view the grocery list associated with a meal plan, but you haven't generated and saved a meal plan yet, it will tell you that you need to make a meal plan)
    - "Technologies" used
        - do-while loop
        - try-catch
        - switch statement
        - if-else statements

### UserProfileUI Class
- **CreateNewUserPrompts():**  The user provides a username. If the username is blank or if it already exists, prompt the user and ask them for another username.  Once the user provides the user name, store it.  Returns the userId.
    - Calls these methods
        - UsersLogic.CheckIfUserExists(userInput) (the userInput is the username provided by the user)
        - UserLogic.CreateNewUser(userInput) (this kicks off the process to store the uesr)
    - Validates user input through
        - If-else if-else that checks if the userInput is null or empty and then checks if the user already exists
    - "Technologies" used
        - Do-while loop
        - If-else if-else
- **LogInPrompts():**:  The user enteres a username.  If it's blank or if the username does NOT exist, we ask the uesr to try again.  If it does exist, we retrieve the User from storage.  Returns the userId.
    - Calls these methods
        - UsersLogic.CheckIfUserExists(userInput)
        - UsersLogic.GetExistingUser(userInput)
    - Validates the uesr input through
        - If-else if-else that checks if the userInput is null or empty and then checks if the user doesn't exist.
    - "Technologies" used:
        - Do-while loop
        - If-else if-else

### MealPlansUI Class
- DisplayNewMealPlan()
- DisplayExistingMealPlan()
- ModifyExistingMealPlan(): Change this to use the GenerateNewMeals() method in MealPlansLogic

### GroceryListUI Class
- DisplayGroceryList()

## Logic Layer
### UsersLogic Class
- CreateNewUser()
- CheckIfUserExists()
- FindExistingUsers()

### MealPlansLogic Class
- GenerateNewMeals()
- SaveMealPlan()
- GetMealPlan()
- ViewAllMeals()

### GroceryListLogic Class
- GetGroceryList()
- CompileIngredientList()

## Data Access Layer
### JsonUsersStorage Class - *no longer used after switching to ADO.NET*
- StoreNewUser()
- SearchUsersStorage()

### JsonMealPlansStorage Class - *no longer used after switching to ADO.NET*
- StoreMealPlan()
- RetrieveUserMealPlan()

### JsonMealsSorage Class - *no longer used after switching to ADO.NET*
- RetrieveStoredMeal()
- RetrieveIngredientList()
- RetrieveAllMeals()

### SQLUserStorage.cs
### SQLMealsStorage.cs
### SQLMealPlansStorage.cs


## Potential Future Enhancements/Other Ideas/Non-MVP-Brainstorm Section/Drafts
- Xunit
- Change to a DTO?
- Modify the ToStrings for 
    - MealPlans class to display the meal plan instead of handling it in the MealPlanUI.cs
    - GroceryList class
    - GroceryItem class
- Aa a user, I want to view a recipe
- As a user, I want to be able to add new meals/recipes
- As a user, I want to be able to 'rate' (or just 'blacklist') certain meals so they never show up in my meal plan
- Add a grocery item type so I can separate the grocery list by area of store
    - Could just add a 'category' attribute to the grocery item class OR
    - Produce, Raw Meat, Deli, Spices, Dairy, Oils, Sauces could all be subclasses of Grocery Items
        - In Raw Meat, could have extra info like "grass fed"
        - In Deli, could have a method to convert 'slices' to ounces
        - OR could just have Meats and have pre-cooked vs. cooked that later warns a user when they're cooking that pre-work is involved
        - Processed food could have attributes like glutenfree or dairyfree
